[{"type":"js","data":"/* Imports for global scope */\n\nMongoInternals = Package.mongo.MongoInternals;\nMongo = Package.mongo.Mongo;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nDate = Package['es5-shim'].Date;\nparseInt = Package['es5-shim'].parseInt;\nECMAScript = Package.ecmascript.ECMAScript;\nmoment = Package['momentjs:moment'].moment;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\nmain = Package.webapp.main;\nWebAppInternals = Package.webapp.WebAppInternals;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nDDPServer = Package['ddp-server'].DDPServer;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nbabelHelpers = Package['babel-runtime'].babelHelpers;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nPromise = Package.promise.Promise;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAccountsServer = Package['accounts-base'].AccountsServer;\nAutoupdate = Package.autoupdate.Autoupdate;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/router.js                                                       //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nRouter.configure({                                                     // 1\n\tlayoutTemplate: 'layout'                                              // 2\n});                                                                    //\n                                                                       //\nRouter.map(function () {                                               // 5\n\tthis.route('home', { path: '/' });                                    // 6\n\tthis.route('play', {                                                  // 7\n\t\tpath: '/game/:_id',                                                  // 8\n\t\tdata: function () {                                                  // 9\n\t\t\tvar game = Games.findOne(this.params._id);                          // 10\n                                                                       //\n\t\t\tif (game) {                                                         // 12\n\t\t\t\tgame.player = game.players[Meteor.userId()];                       // 13\n\t\t\t\tgame.yourTurn = game.currentTurn[0] === Meteor.userId();           // 14\n                                                                       //\n\t\t\t\tvar otherId = game.currentTurn[game.yourTurn ? 1 : 0];             // 16\n\t\t\t\tgame.otherPlayer = {                                               // 17\n\t\t\t\t\tusername: Meteor.users.findOne(otherId).username,                 // 18\n\t\t\t\t\tscore: game.players[otherId].score                                // 19\n\t\t\t\t};                                                                 //\n\t\t\t\treturn game;                                                       // 21\n\t\t\t}                                                                   //\n\t\t\treturn {};                                                          // 23\n\t\t}                                                                    //\n\t});                                                                   //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/router.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/lib/router.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,SAAS,CAAC;AAChB,eAAc,EAAE,QAAQ;CACxB,CAAC,CAAC;;AAEH,MAAM,CAAC,GAAG,CAAC,YAAW;AACrB,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,GAAG,EAAC,CAAC,CAAC;AACjC,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AAClB,MAAI,EAAE,YAAY;AAClB,MAAI,EAAE,YAAY;AACjB,OAAI,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;;AAE1C,OAAG,IAAI,EAAE;AACT,QAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;AAC5C,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC,MAAM,EAAE,CAAC;;AAExD,QAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AACtD,QAAI,CAAC,WAAW,GAAG;AAClB,aAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,QAAQ;AAChD,UAAK,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK;KAClC;AACD,WAAO,IAAI,CAAC;IACZ;AACD,UAAO,EAAE,CAAC;GACV;EACA,CAAC,CAAC;CAEH,CAAC,CAAC,sE","file":"/lib/router.js","sourcesContent":["Router.configure({\n\tlayoutTemplate: 'layout'\n});\n\nRouter.map(function() {\n\tthis.route('home', { path: '/'});\n\tthis.route('play', {\n\t\tpath: '/game/:_id',\n\t\tdata: function () {\n\t\t\tvar game = Games.findOne(this.params._id);\n\n\t\t\tif(game) {\n\t\t\tgame.player = game.players[Meteor.userId()];\n\t\t\tgame.yourTurn = game.currentTurn[0] === Meteor.userId();\n\n\t\t\tvar otherId = game.currentTurn[game.yourTurn ? 1 : 0];\n\t\t\tgame.otherPlayer = {\n\t\t\t\tusername: Meteor.users.findOne(otherId).username,\n\t\t\t\tscore: game.players[otherId].score\n\t\t\t}\n\t\t\treturn game;\n\t\t}\n\t\treturn {};\n\t}\n\t});\n\n});\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// gameCreation.js                                                     //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nGameFactory = {};                                                      // 1\n                                                                       //\nGameFactory.createGame = function (playerIds) {                        // 3\n  var deck = createDeck(),                                             // 4\n      players = createPlayers(playerIds);                              //\n                                                                       //\n  GameFactory.dealPlayers(players, deck);                              // 7\n  var table = dealTable(deck);                                         // 8\n                                                                       //\n  return {                                                             // 10\n    deck: deck,                                                        // 11\n    players: players,                                                  // 12\n    table: table,                                                      // 13\n    currentTurn: playerIds,                                            // 14\n    inProgress: true,                                                  // 15\n    started: new Date()                                                // 16\n  };                                                                   //\n};                                                                     //\n                                                                       //\nGameFactory.dealPlayers = function (players, deck) {                   // 20\n  for (var i = 0; i < 3; i++) {                                        // 21\n    Object.keys(players).forEach(function (id) {                       // 22\n      players[id].hand.push(deck.shift());                             // 23\n    });                                                                //\n  }                                                                    //\n};                                                                     //\n                                                                       //\nfunction dealTable(deck) {                                             // 28\n  var c = deck.shift.bind(deck);                                       // 29\n  return [c(), c(), c(), c()];                                         // 30\n}                                                                      //\n                                                                       //\nfunction createPlayers(ids) {                                          // 33\n  var o = {};                                                          // 34\n                                                                       //\n  ids.forEach(function (id) {                                          // 36\n    o[id] = {                                                          // 37\n      hand: [],                                                        // 38\n      pile: [],                                                        // 39\n      score: {                                                         // 40\n        mostCoins: 0,                                                  // 41\n        mostCards: 0,                                                  // 42\n        setteBello: 0,                                                 // 43\n        primera: 0,                                                    // 44\n        scopa: 0                                                       // 45\n      }                                                                //\n    };                                                                 //\n  });                                                                  //\n  return o;                                                            // 49\n}                                                                      //\n                                                                       //\nfunction createDeck() {                                                // 52\n  var suits = ['Cups', 'Coins', 'Swords', 'Clubs'];                    // 53\n  cards = [];                                                          // 54\n  suits.forEach(function (suit) {                                      // 55\n    for (var i = 1; i <= 10; i++) {                                    // 56\n      var name = i;                                                    // 57\n      if (i === 1) name = 'A';                                         // 58\n      if (i === 8) name = 'N';                                         // 59\n      if (i === 8) name = 'Q';                                         // 60\n      if (i === 10) name = 'K';                                        // 61\n      cards.push({                                                     // 62\n        suit: suit,                                                    // 63\n        value: i,                                                      // 64\n        name: name                                                     // 65\n      });                                                              //\n    }                                                                  //\n  });                                                                  //\n                                                                       //\n  return _.shuffle(cards);                                             // 70\n}                                                                      //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/gameCreation.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/gameCreation.js"],"names":[],"mappings":";;;;;;;;AAAA,WAAW,GAAG,EAAE,CAAC;;AAEjB,WAAW,CAAC,UAAU,GAAG,UAAU,SAAS,EAAE;AAC5C,MAAI,IAAI,GAAG,UAAU,EAAE;MACnB,OAAO,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC;;AAEvC,aAAW,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACvC,MAAI,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;;AAE5B,SAAM;AACJ,QAAI,EAAE,IAAI;AACV,WAAO,EAAE,OAAO;AAChB,SAAK,EAAE,KAAK;AACZ,eAAW,EAAE,SAAS;AACtB,cAAU,EAAE,IAAI;AAChB,WAAO,EAAE,IAAI,IAAI,EAAE;GACpB,CAAC;CACH,CAAC;;AAEF,WAAW,CAAC,WAAW,GAAG,UAAS,OAAO,EAAE,IAAI,EAAE;AAChD,OAAI,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,CAAC,EAAE,CAAC,EAAE,EAAE;AACrB,UAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAS,EAAE,EAAE;AACxC,aAAO,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;KACrC,CAAC,CAAC;GACJ;CACF,CAAC;;AAEF,SAAS,SAAS,CAAC,IAAI,EAAE;AACvB,MAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9B,SAAO,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;CAC7B;;AAED,SAAS,aAAa,CAAC,GAAG,EAAE;AAC1B,MAAI,CAAC,GAAG,EAAE,CAAC;;AAEX,KAAG,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE;AACxB,KAAC,CAAC,EAAE,CAAC,GAAG;AACN,UAAI,EAAE,EAAE;AACR,UAAI,EAAE,EAAE;AACR,WAAK,EAAE;AACL,iBAAS,EAAE,CAAC;AACZ,iBAAS,EAAE,CAAC;AACZ,kBAAU,EAAE,CAAC;AACb,eAAO,EAAE,CAAC;AACV,aAAK,EAAE,CAAC;OACT;KACF,CAAC;GACH,CAAC,CAAC;AACH,SAAO,CAAC,CAAC;CACV;;AAED,SAAS,UAAU,GAAI;AACrB,MAAI,KAAK,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;AAC7C,OAAK,GAAG,EAAE,CAAC;AACf,OAAK,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC5B,SAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAC5B,UAAI,IAAI,GAAG,CAAC,CAAC;AACb,UAAI,CAAC,KAAK,CAAC,EAAE,IAAI,GAAG,GAAG,CAAC;AACxB,UAAI,CAAC,KAAK,CAAC,EAAE,IAAI,GAAG,GAAG,CAAC;AACxB,UAAI,CAAC,KAAK,CAAC,EAAE,IAAI,GAAG,GAAG,CAAC;AACxB,UAAI,CAAC,KAAK,EAAE,EAAE,IAAI,GAAG,GAAG,CAAC;AACzB,WAAK,CAAC,IAAI,CAAC;AACT,YAAI,EAAE,IAAI;AACV,aAAK,EAAE,CAAC;AACR,YAAI,EAAE,IAAI;OACX,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;;AAEH,SAAO,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;CACzB,wE","file":"/gameCreation.js","sourcesContent":["GameFactory = {};\n\nGameFactory.createGame = function (playerIds) {\n  var deck = createDeck(),\n      players = createPlayers(playerIds);\n\n  GameFactory.dealPlayers(players, deck);\n  var table = dealTable(deck);\n\n  return{\n    deck: deck,\n    players: players,\n    table: table,\n    currentTurn: playerIds,\n    inProgress: true,\n    started: new Date()\n  };\n};\n\nGameFactory.dealPlayers = function(players, deck) {\n  for(var i=0; i<3; i++) {\n    Object.keys(players).forEach(function(id) {\n      players[id].hand.push(deck.shift());\n    });\n  }\n};\n\nfunction dealTable(deck) {\n  var c = deck.shift.bind(deck);\n  return [c(), c(), c(), c()];\n}\n\nfunction createPlayers(ids) {\n  var o = {};\n\n  ids.forEach(function (id) {\n    o[id] = {\n      hand: [],\n      pile: [],\n      score: {\n        mostCoins: 0,\n        mostCards: 0,\n        setteBello: 0,\n        primera: 0,\n        scopa: 0\n      }\n    };\n  });\n  return o;\n}\n\nfunction createDeck () {\n  var suits = ['Cups', 'Coins', 'Swords', 'Clubs'];\n      cards = [];\n  suits.forEach(function (suit) {\n    for (var i = 1; i <= 10; i++) {\n      var name = i;\n      if (i === 1) name = 'A';\n      if (i === 8) name = 'N';\n      if (i === 8) name = 'Q';\n      if (i === 10) name = 'K';\n      cards.push({\n        suit: suit,\n        value: i,\n        name: name\n      });\n    }\n  });\n\n  return _.shuffle(cards);\n}\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// games.js                                                            //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nGames = new Meteor.Collection('games');                                // 1\n                                                                       //\nif (Meteor.isServer) {                                                 // 3\n  Meteor.publish('games', function () {                                // 4\n    return Games.find({ currentTurn: this.userId });                   // 5\n  });                                                                  //\n                                                                       //\n  Meteor.publish('users', function () {                                // 8\n    return Meteor.users.find();                                        // 9\n  });                                                                  //\n}                                                                      //\n                                                                       //\nif (Meteor.isClient) {                                                 // 14\n  Meteor.subscribe('games');                                           // 15\n  Meteor.subscribe('users');                                           // 16\n}                                                                      //\n                                                                       //\nMeteor.methods({                                                       // 19\n  createGame: function (otherPlayerId) {                               // 20\n    var game = GameFactory.createGame([Meteor.userId(), otherPlayerId]);\n    Games.insert(game);                                                // 22\n  },                                                                   //\n  takeTurn: function (gameId, id, card) {                              // 24\n    console.log(id, card);                                             // 25\n  }                                                                    //\n                                                                       //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/games.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/games.js"],"names":[],"mappings":";;;;;;;;AAAA,KAAK,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;;AAEvC,IAAI,MAAM,CAAC,QAAQ,EAAE;AACnB,QAAM,CAAC,OAAO,CAAC,OAAO,EAAE,YAAW;AACjC,WAAO,KAAK,CAAC,IAAI,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;GACjD,CAAC,CAAC;;AAEH,QAAM,CAAC,OAAO,CAAC,OAAO,EAAE,YAAY;AAClC,WAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;GAC5B,CAAC,CAAC;CAEJ;;AAED,IAAG,MAAM,CAAC,QAAQ,EAAE;AAClB,QAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAC1B,QAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;CAC3B;;AAED,MAAM,CAAC,OAAO,CAAC;AACb,YAAU,EAAE,UAAU,aAAa,EAAE;AACnC,QAAI,IAAI,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,aAAa,CAAC,CAAC,CAAC;AACpE,SAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;GACpB;AACD,UAAQ,EAAE,UAAU,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE;AACpC,WAAO,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;GACvB;;CAEF,CAAC,CAAC,sE","file":"/games.js","sourcesContent":["Games = new Meteor.Collection('games');\n\nif (Meteor.isServer) {\n  Meteor.publish('games', function() {\n    return Games.find({ currentTurn: this.userId });\n  });\n\n  Meteor.publish('users', function () {\n    return Meteor.users.find();\n  });\n\n}\n\nif(Meteor.isClient) {\n  Meteor.subscribe('games');\n  Meteor.subscribe('users');\n}\n\nMeteor.methods({\n  createGame: function (otherPlayerId) {\n    var game = GameFactory.createGame([Meteor.userId(), otherPlayerId]);\n    Games.insert(game);\n  },\n  takeTurn: function (gameId, id, card) {\n    console.log(id, card);\n  }\n\n});\n"]}}]